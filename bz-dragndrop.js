!function(a,b){return"function"==typeof define&&define.amd?(define("bzDragndrop",["angular","bzData"],function(a,c){return b(c)}),void 0):b(a)}(angular||null,function(a){var b=a.module("bzDragndrop",["bzData"]);return b.directive("bzDraggable",["$rootScope",function(a){return{restrict:"A",require:"bzData",link:function(b,c,d,e){d.$set("draggable",!0),a.$$dragElements=a.$$dragElements||[],c.bind("dragstart",function(b){return b.dataTransfer.effectAllowed="move",a.$$dragElements[e.$$hashKey]=e,a.$$currentData=e,b.dataTransfer.setData("text",e.$$hashKey),c.addClass("drag"),a.$emit("bzDragStart",c),!1}),c.bind("dragend",function(){c.removeClass("drag"),a.$$dragElements.splice(a.$$dragElements.indexOf(e.$$hashKey),1),a.$$currentData=void 0,a.$emit("bzDragEnd",c)})}}}]),b.directive("bzDroppable",["$rootScope","$parse",function(b,c){return{scope:!0,link:function(d,e,f){f.$set("droppable",!0),f.bzDroppable&&(d.validate=c(f.bzDroppable)),f.drop&&(d.drop=c(f.drop)),b.$$dragElements=b.$$dragElements||[];var g=function(b){return a.isFunction(d.validate)?d.validate(d,{$data:b}):!0},h=function(c){var d=c.dataTransfer.getData("text"),e=b.$$dragElements[d]||b.$$currentData;return a.isUndefined(e)?void 0:e.data()};e.bind("dragover",function(a){return a.dataTransfer.dropEffect="move",a.preventDefault&&a.preventDefault(),g(h(a))?(e.addClass("over"),!1):!0}),e.bind("dragenter",function(a){g(h(a))&&e.addClass("over")}),e.bind("dragleave",function(a){g(h(a))&&e.removeClass("over")}),e.bind("drop",function(a){return g(h(a))?(e.removeClass("over"),a.preventDefault&&a.preventDefault(),a.stopPropogation&&a.stopPropogation(),d.$apply(function(b){b.drop(b,{$data:h(a)})}),!1):!0})}}}]),b});
//# sourceMappingURL=bz-dragndrop.map